<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Asociación de Bochas de Alta Gracia</title>
<link rel="icon" type="image/png" href="logo-asociacion-removebg-preview.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- BASE DE DATOS -->
<script src="database.js"></script>
<link rel="stylesheet" href="styles.css">

<style>
/* Permitir scroll normal en móviles */
body, html {
    overflow-x: hidden;
}

.section {
    display: none;
    padding: 20px;
}

.layout {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
}

iframe {
    max-width: 100%;
    height: 400px;
}

body{
    font-family: Arial, Helvetica, sans-serif;
    margin:0;
    background:#f4f4f4;
    font-size:18px;
}

nav button{
    margin:5px;
    padding:12px 25px;
    font-size:18px;
    cursor:pointer;
}

.section{display:none;padding:25px;}
.active{display:block;}
.layout{display:flex;gap:20px;flex-wrap:wrap;}
.box{
    background:#fff;
    padding:20px;
    border-radius:6px;
}
.club-card{
    border:1px solid #ccc;
    padding:20px;
    margin-bottom:20px;
    background:#fff;
}
.club-details{
    display:none;
    margin-top:15px;
    padding:15px;
    background:#eef;
}
h2{font-size:26px;}
h3{font-size:22px;}
button.simple{padding:10px 20px;font-size:17px;}

/* TABLA SOLO EN JUGADORES */
.table-wrapper {
    max-width: 100%;
    max-height: 400px;
    overflow-x: auto;
    overflow-y: auto;
    border: 1px solid #ccc;
    border-radius: 6px;
    padding: 10px;
    margin-bottom: 15px;
}

table{
    width:100%;
    border-collapse:collapse;
    margin-top:20px;
    background:#fff;
    min-width: 900px;
}

th,td{
    border:1px solid #999;
    padding:10px;
    text-align:center;
    white-space:nowrap;
}
th{
    background:#0b4f6c;
    color:#fff;
}
</style>
</head>

<body>

<header class="main-header">
  <img src="logo-asociacion.png" alt="Logo Asociación" class="logo">

  <div class="header-center">
    <h1>Asociación de Bochas de Alta Gracia</h1>
    <nav>
      <button onclick="showSection('inicio')">Inicio</button>
      <button onclick="showSection('clubes')">Clubes</button>
      <button onclick="showSection('jugadores')">Jugadores</button>
    </nav>
  </div>
</header>

<!-- ================= INICIO ================= -->
<section id="inicio" class="section active">
<div class="layout">
  <div class="box">
    <h2>Calendario</h2>
    <iframe src="https://calendar.google.com/calendar/embed?ctz=America/Argentina/Cordoba"
      style="border:0" width="100%" height="400"></iframe>
  </div>

  <div class="box">
    <h2>Torneos Federados</h2>
    <div id="torneosFederados"></div>

    <hr style="margin:20px 0;">

    <h2>Torneos Internos</h2>
    <div id="torneosInternos"></div>
  </div>
</div>
</section>

<!-- ================= CLUBES ================= -->
<section id="clubes" class="section">
<h2>Clubes Asociados</h2>
<div id="clubesContainer"></div>
</section>

<!-- ================= JUGADORES ================= -->
<section id="jugadores" class="section">
<h2>Seguimiento de Jugadores</h2>

<div class="table-wrapper">
  <table>
    <thead>
      <tr>
        <th>Jugador</th>
        <th>Club</th>
        <th>Categoría</th>
        <th>Torneos</th>
        <th>1° Ronda</th>
        <th>Zona</th>
        <th>16avos</th>
        <th>Octavos</th>
        <th>Cuartos</th>
        <th>Semifinal</th>
        <th>Subcampeón</th>
        <th>Campeón</th>
      </tr>
    </thead>
    <tbody id="tablaJugadoresBody"></tbody>
  </table>
</div>

</section>

<script>
const db = getDB();

/* ================= Navegación ================= */
function showSection(id){
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');

  if(id === "jugadores"){
    cargarJugadores();
  }
}

function toggle(id){
  const e = document.getElementById(id);
  e.style.display = e.style.display === 'block' ? 'none' : 'block';
}

/* ================= Cargar datos al inicio ================= */
document.addEventListener("DOMContentLoaded", () => {

  /* ===== Torneos Federados ===== */
  const fed = document.getElementById("torneosFederados");
  fed.innerHTML = "";
  db.torneosFederados?.forEach((t,i)=>{
    const div=document.createElement("div");
    div.className="club-card";
    div.innerHTML=`
      <h3>Torneo Federado #${t.id}</h3>
      <p><strong>Fecha:</strong> ${t.fecha}</p>
      <p><strong>Observación:</strong> ${t.observacion}</p>
      <button class="simple" onclick="toggle('fed-${i}')">Ver inscriptos</button>
      <div id="fed-${i}" class="club-details">
        ${Object.entries(t.inscriptos).map(([club,jug])=>`
          <p><strong>${club}:</strong> ${jug.length?jug.join(", "):"No presenta"}</p>
        `).join("")}
      </div>
    `;
    fed.appendChild(div);
  });

  /* ===== Torneos Internos ===== */
  const internos = document.getElementById("torneosInternos");
  internos.innerHTML = "";
  db.torneosInternos?.forEach(t=>{
    const div=document.createElement("div");
    div.className="club-card";
    div.innerHTML = `
      <h3>${t.nombre}</h3>
      <p><strong>Fecha:</strong> ${t.fecha}</p>
      <p><strong>Organiza:</strong> ${t.organizador}</p>
      <p>${t.descripcion}</p>
    `;
    internos.appendChild(div);
  });

  /* ===== Clubes ===== */
  const contClubes = document.getElementById("clubesContainer");
  contClubes.innerHTML = "";
  db.clubes.forEach((club,i)=>{
    const card=document.createElement("div");
    card.className="club-card";
    card.innerHTML = `
      <h3>${club.nombre}</h3>
      <p><strong>Ubicación:</strong> ${club.ubicacion}</p>
      <button class="simple" onclick="toggle('club-${i}')">Ver club</button>
      <div id="club-${i}" class="club-details">
        <ul>
          ${["Primera","Segunda","Tercera"].map(cat=>`
            <li><strong>${cat}:</strong>
              ${club.jugadores.filter(j=>j.categoria===cat).map(j=>j.nombre).join(", ") || "-"}
            </li>
          `).join("")}
        </ul>
      </div>
    `;
    contClubes.appendChild(card);
  });

  /* ===== Jugadores ===== */
  function cargarJugadores(){
    const tbody = document.getElementById("tablaJugadoresBody");
    tbody.innerHTML = "";
    db.clubes.forEach(club=>{
      club.jugadores.forEach(j=>{
        const tr=document.createElement("tr");
        tr.innerHTML = `
          <td>${j.nombre}</td>
          <td>${club.nombre}</td>
          <td>${j.categoria}</td>
          ${j.stats.map(s=>`<td>${s}</td>`).join("")}
        `;
        tbody.appendChild(tr);
      });
    });
  }

  window.cargarJugadores = cargarJugadores;
  showSection('inicio'); // Se asegura que inicio se muestre al cargar
});
</script>

</body>
</html>


