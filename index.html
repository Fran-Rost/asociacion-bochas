<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Asociación de Bochas de Alta Gracia</title>
<link rel="icon" type="image/png" href="logo-asociacion-removebg-preview.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- BASE DE DATOS -->
<script src="database.js"></script>
<link rel="stylesheet" href="styles.css">

<style>
/* ================= RESET ================= */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  overflow-x: hidden;
  font-family: Arial, Helvetica, sans-serif;
  background: #f4f4f4;
  font-size: 18px;
  color: #111;
}

/* ================= HEADER ================= */
.main-header {
  background: #c30000;
  color: #fff;
  padding: 18px 30px;
  position: relative;
}

.logo {
  position: absolute;
  left: 20px;
  top: 50%;
  transform: translateY(-50%);
  height: 90px;
  width: auto;
}

.header-center {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.header-center h1 {
  font-size: 30px;
  margin-bottom: 8px;
}

.header-center nav button {
  margin: 0 6px;
  padding: 10px 22px;
  font-size: 17px;
  cursor: pointer;
  border: none;
  background: #fff;
  color: #8b0000;
  border-radius: 4px;
}

.header-center nav button:hover {
  background: #eee;
}

/* ================= SECCIONES ================= */
.section {
  display: none;
  padding: 20px;
}

.section.active {
  display: block;
}

/* ================= LAYOUT INICIO ================= */
.layout {
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
}

.box {
  background: #fff;
  padding: 20px;
  border-radius: 6px;
  flex: 1 1 300px;
}

/* ================= CLUBES ================= */
.club-card {
  border: 1px solid #ccc;
  padding: 20px;
  margin-bottom: 20px;
  background: #fff;
}

.club-details {
  display: none;
  margin-top: 15px;
  padding: 15px;
  background: #eef;
}

/* ================= TABLA JUGADORES ================= */
.table-wrapper {
  max-height: 400px;
  overflow-y: auto;
  overflow-x: auto;
  border: 1px solid #ccc;
  border-radius: 6px;
  padding: 10px;
  margin-bottom: 15px;
}

table {
  width: 100%;
  border-collapse: collapse;
  min-width: 900px;
}

th, td {
  border: 1px solid #999;
  padding: 10px;
  text-align: center;
  white-space: nowrap;
}

th {
  background: #0b4f6c;
  color: #fff;
  position: sticky;
  top: 0;
  z-index: 2;
}

/* ================= MOBILE ================= */
@media (max-width: 768px) {
  .main-header {
    padding: 14px 12px;
  }

  .logo {
    left: 12px;
    top: 12px;
    transform: none;
    height: 60px;
  }

  .header-center {
    margin-left: 90px;
    align-items: flex-start;
    text-align: left;
  }

  .header-center h1 {
    font-size: 20px;
    line-height: 1.25;
  }

  .header-center nav {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
  }

  .header-center nav button {
    font-size: 14px;
    padding: 7px 14px;
  }

  .layout {
    flex-direction: column;
  }

  #jugadores table {
    min-width: 600px;
    font-size: 13px;
  }
}
</style>
</head>

<body>

<header class="main-header">
  <img src="logo-asociacion.png" alt="Logo Asociación" class="logo">
  <div class="header-center">
    <h1>Asociación de Bochas de Alta Gracia</h1>
    <nav>
      <button onclick="showSection('inicio')">Inicio</button>
      <button onclick="showSection('clubes')">Clubes</button>
      <button onclick="showSection('jugadores')">Jugadores</button>
    </nav>
  </div>
</header>

<!-- ================= INICIO ================= -->
<section id="inicio" class="section active">
  <div class="layout">
    <div class="box">
      <h2>Calendario</h2>
      <iframe src="https://calendar.google.com/calendar/embed?ctz=America/Argentina/Cordoba" style="border:0" width="100%" height="400"></iframe>
    </div>

    <div class="box">
      <h2>Torneos Federados</h2>
      <div id="torneosFederados"></div>
      <hr style="margin:20px 0;">
      <h2>Torneos Internos</h2>
      <div id="torneosInternos"></div>
    </div>
  </div>
</section>

<!-- ================= CLUBES ================= -->
<section id="clubes" class="section">
  <h2>Clubes Asociados</h2>
  <div id="clubesContainer"></div>
</section>

<!-- ================= JUGADORES ================= -->
<section id="jugadores" class="section">
  <h2>Seguimiento de Jugadores</h2>
  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Jugador</th>
          <th>Club</th>
          <th>Categoría</th>
          <th>Torneos</th>
          <th>1° Ronda</th>
          <th>Zona</th>
          <th>16avos</th>
          <th>Octavos</th>
          <th>Cuartos</th>
          <th>Semifinal</th>
          <th>Subcampeón</th>
          <th>Campeón</th>
        </tr>
      </thead>
      <tbody id="tablaJugadoresBody"></tbody>
    </table>
  </div>
</section>

<script>
const db = getDB();

/* ================= Navegación ================= */
function showSection(id){
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');

  if(id === "jugadores"){
    cargarJugadores();
  }
}

function toggle(id){
  const e = document.getElementById(id);
  e.style.display = e.style.display === 'block' ? 'none' : 'block';
}

/* ================= Cargar datos ================= */
document.addEventListener("DOMContentLoaded", () => {
  // Torneos Federados
  const fed = document.getElementById("torneosFederados");
  fed.innerHTML = "";
  db.torneosFederados?.forEach((t,i)=>{
    const div=document.createElement("div");
    div.className="club-card";
    div.innerHTML=`
      <h3>Torneo Federado #${t.id}</h3>
      <p><strong>Fecha:</strong> ${t.fecha}</p>
      <p><strong>Observación:</strong> ${t.observacion}</p>
      <button class="simple" onclick="toggle('fed-${i}')">Ver inscriptos</button>
      <div id="fed-${i}" class="club-details">
        ${Object.entries(t.inscriptos).map(([club,jug])=>`
          <p><strong>${club}:</strong> ${jug.length?jug.join(", "):"No presenta"}</p>
        `).join("")}
      </div>
    `;
    fed.appendChild(div);
  });

  // Torneos Internos
  const internos = document.getElementById("torneosInternos");
  internos.innerHTML = "";
  db.torneosInternos?.forEach(t=>{
    const div=document.createElement("div");
    div.className="club-card";
    div.innerHTML=`
      <h3>${t.nombre}</h3>
      <p><strong>Fecha:</strong> ${t.fecha}</p>
      <p><strong>Organiza:</strong> ${t.organizador}</p>
      <p>${t.descripcion}</p>
    `;
    internos.appendChild(div);
  });

  // Clubes
  const contClubes = document.getElementById("clubesContainer");
  contClubes.innerHTML = "";
  db.clubes.forEach((club,i)=>{
    const card=document.createElement("div");
    card.className="club-card";
    card.innerHTML=`
      <h3>${club.nombre}</h3>
      <p><strong>Ubicación:</strong> ${club.ubicacion}</p>
      <button class="simple" onclick="toggle('club-${i}')">Ver club</button>
      <div id="club-${i}" class="club-details">
        <ul>
          ${["Primera","Segunda","Tercera"].map(cat=>`
            <li><strong>${cat}:</strong> ${club.jugadores.filter(j=>j.categoria===cat).map(j=>j.nombre).join(", ") || "-"}</li>
          `).join("")}
        </ul>
      </div>
    `;
    contClubes.appendChild(card);
  });

  // Jugadores
  function cargarJugadores(){
    const tbody = document.getElementById("tablaJugadoresBody");
    tbody.innerHTML = "";
    db.clubes.forEach(club=>{
      club.jugadores.forEach(j=>{
        const tr=document.createElement("tr");
        tr.innerHTML=`
          <td>${j.nombre}</td>
          <td>${club.nombre}</td>
          <td>${j.categoria}</td>
          ${j.stats.map(s=>`<td>${s}</td>`).join("")}
        `;
        tbody.appendChild(tr);
      });
    });
  }

  window.cargarJugadores = cargarJugadores;
  showSection('inicio'); // asegura que inicio se vea al cargar
});
</script>

</body>
</html>
